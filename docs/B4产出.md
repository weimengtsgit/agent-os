## 1ï¸âƒ£ æœ¬è½®äº§å‡ºæ‘˜è¦ï¼ˆB4ï¼‰

1. æ¨è **mono-repo èµ·æ­¥**ï¼ˆä¸€ä¸ªä»“åº“å†…åˆ†åŒ…ï¼‰ï¼Œä»¥â€œæ˜å¤©èƒ½å¼€å·¥ + ç»Ÿä¸€å¥‘çº¦/CIâ€ä¸ºä¼˜å…ˆï¼›åç»­å†æ‹† repo
2. ç»™å‡ºå¯ç›´æ¥è½åœ°çš„ **ç›®å½•ç»“æ„åˆ° 3 å±‚**ï¼Œè¦†ç›– core/specs/registry/pal/sdk + agno runtime adapter + console + ç¤ºä¾‹ agents
3. æä¾› **Agent æ¨¡æ¿ / Tool æ¨¡æ¿ / Workflow æ¨¡æ¿ï¼ˆå¯é€‰ï¼‰**ï¼šåŒ…å«ç¤ºä¾‹ YAMLï¼ˆç¬¦åˆ B3 çš„ schemaï¼‰
4. ç»™å‡º **é…ç½®ç®¡ç†ç­–ç•¥**ï¼šSpec/Prompt/ModelRef çš„å­˜æ”¾æ–¹å¼ã€åŠ è½½è§„åˆ™ã€ç°åº¦/å›æ»šæœ€å°å®ç°
5. ç»™å‡º **CI æœ€å°æµæ°´çº¿**ï¼šschema validate + unit tests + contract tests + dependency guardï¼ˆç¦æ­¢ä¸šåŠ¡ç›´æ¥ä¾èµ– agnoï¼‰
6. ç»™å‡ºâ€œæ˜å¤©å¼€å·¥â€çš„ **ç¬¬ä¸€å‘¨é‡Œç¨‹ç¢‘**ä¸éªŒæ”¶å£å¾„

---

## 2ï¸âƒ£ å¯æ‰§è¡Œ TODO æ¸…å•ï¼ˆP0/P1/P2ï¼Œâ‰¥12ï¼‰

### P0ï¼ˆæ˜å¤©å¼€å·¥å¿…é¡»åšï¼‰

1. åˆå§‹åŒ– mono-repo ç›®å½•ç»“æ„ï¼ˆè§ä¸‹æ–‡æ ‘ï¼‰å¹¶è·‘é€šæœ€å° `python -m` åŒ…å¯¼å…¥
2. æŠŠ B3 çš„ 5 ä¸ª schema è½ç›˜åˆ° `platform-core/specs/schemas/`
3. å®ç° `agentctl validate`ï¼šå¯¹ `agents/**.yaml` åš JSON Schema æ ¡éªŒ
4. å®ç° `agentctl run-local`ï¼šè¯»å– `agent.yaml` â†’ é€‰æ‹© runtime(selector=agno) â†’ å¯åŠ¨é€‚é…å™¨
5. åŠ å…¥ CIï¼šå¯¹æ‰€æœ‰ PR æ‰§è¡Œ `agentctl validate`
6. åŠ å…¥ CIï¼šdependency guardï¼Œé˜»æ­¢ `agents/` æˆ– `platform-core/sdk` å¼•å…¥ agno åŒ…
7. å»ºç«‹ sample agentï¼ˆæœ€å°‘ 1 ä¸ªï¼‰+ sample toolï¼ˆæœ€å°‘ 1 ä¸ªï¼‰ï¼Œè·‘é€š end-to-endï¼ˆå³ä¾¿ tool æ˜¯ mockï¼‰

### P1ï¼ˆ1~2 å‘¨å†…è¡¥é½ï¼‰

8. å®ç° `agentctl register`ï¼šæŠŠ Agent/Tool/Policy å†™å…¥ Registryï¼ˆå…ˆ SQLiteï¼‰
9. å®ç° contract test æ¡†æ¶ï¼šå›ºå®šè¾“å…¥ â†’ è¾“å‡º RunEvent åºåˆ—æ–­è¨€
10. å®ç° `agentctl replay`ï¼šä» events.jsonl å›æ”¾ runï¼ˆMVP çº§ï¼‰
11. Consoleï¼ˆæœ€å°ï¼‰ï¼šRun åˆ—è¡¨ + Run äº‹ä»¶æµæŸ¥çœ‹ï¼ˆå…ˆè¯»æ–‡ä»¶æˆ– SQLiteï¼‰
12. Tool æ¨¡æ¿æ”¯æŒè¶…æ—¶/é‡è¯•é…ç½®ï¼ˆä» tool spec ç”Ÿæ•ˆï¼‰

### P2ï¼ˆé¢„ç•™ä½†ç°åœ¨å®šè§„çŸ©ï¼‰

13. Spec çš„ç‰ˆæœ¬åŒ–èµ„æºï¼špromptRef/modelRef çº¦å®šå‘½åè§„åˆ™å¹¶å†™è¿› README
14. ç°åº¦æœºåˆ¶ï¼šæ”¯æŒ `labels.stage=canary` + `registry` è·¯ç”±ï¼ˆåç»­ï¼‰
15. å·¥ä½œæµæ¨¡æ¿ï¼šå…ˆå ä½ï¼Œåç»­å†æ¥ agno workflow/teams èƒ½åŠ›
16. å®‰å…¨ï¼šé¢„ç•™ secrets æ¥å£ï¼ˆä¸æŠŠå¯†é’¥å†™å…¥ specï¼‰

---

## 3ï¸âƒ£ å…³é”®æ¥å£ / å¥‘çº¦è‰æ¡ˆï¼ˆå·¥ç¨‹è„šæ‰‹æ¶ç›¸å…³ï¼‰

### 3.1 `agentctl` CLI å‘½ä»¤å¥‘çº¦ï¼ˆä¼ªä»£ç ï¼‰

```text
agentctl validate  [--path agents/]                 # schema æ ¡éªŒ
agentctl run-local --agent agents/sample-agent/agent.yaml --input input.json
agentctl register  --path agents/                   # æ³¨å†Œåˆ° registry
agentctl list      [--kind Agent|Tool|Policy]       # æŸ¥è¯¢ registry
agentctl show      --kind Agent --name xxx --version v0.1.0
agentctl replay    --events runs/run-123/events.jsonl
```

### 3.2 Spec åŠ è½½å¥‘çº¦ï¼ˆSDK å†…éƒ¨æ¥å£ï¼Œä¼ªä»£ç ï¼‰

```python
load_agent_spec(path) -> AgentSpec
load_tool_spec(path) -> ToolSpec
validate_spec(obj, schema_name) -> None
resolve_prompt(promptRef) -> str  # å…ˆæ”¯æŒ file pathï¼Œåç»­æ”¯æŒ prompt://
```

---

## 4ï¸âƒ£ ç›®å½•ç»“æ„ / æ¨¡å—åˆ’åˆ†å»ºè®®ï¼ˆmono-repo æ¨èï¼‰

```text
agent-platform/                         # mono-repo
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ README.md
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml
â”œâ”€â”€ platform-core/
â”‚   â”œâ”€â”€ specs/
â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â”œâ”€â”€ agent.schema.json
â”‚   â”‚   â”‚   â”œâ”€â”€ tool.schema.json
â”‚   â”‚   â”‚   â”œâ”€â”€ run-event.schema.json
â”‚   â”‚   â”‚   â”œâ”€â”€ trace-span.schema.json
â”‚   â”‚   â”‚   â””â”€â”€ policy.schema.json
â”‚   â”‚   â”œâ”€â”€ validator.py
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ pal/
â”‚   â”‚   â”œâ”€â”€ types.py
â”‚   â”‚   â”œâ”€â”€ runtime.py
â”‚   â”‚   â”œâ”€â”€ tools.py
â”‚   â”‚   â”œâ”€â”€ llm.py
â”‚   â”‚   â”œâ”€â”€ memory.py
â”‚   â”‚   â”œâ”€â”€ observability.py
â”‚   â”‚   â””â”€â”€ policy.py
â”‚   â”œâ”€â”€ registry/
â”‚   â”‚   â”œâ”€â”€ store_sqlite.py
â”‚   â”‚   â”œâ”€â”€ service.py
â”‚   â”‚   â””â”€â”€ models.py
â”‚   â””â”€â”€ sdk/
â”‚       â”œâ”€â”€ loader.py
â”‚       â”œâ”€â”€ runtime_router.py
â”‚       â”œâ”€â”€ tool_executor.py
â”‚       â””â”€â”€ cli/
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ validate.py
â”‚           â”œâ”€â”€ run_local.py
â”‚           â”œâ”€â”€ register.py
â”‚           â””â”€â”€ replay.py
â”œâ”€â”€ agent-runtime-agno/
â”‚   â”œâ”€â”€ adapters/
â”‚   â”‚   â”œâ”€â”€ agno_runtime.py
â”‚   â”‚   â”œâ”€â”€ agno_tool_bridge.py
â”‚   â”‚   â””â”€â”€ agno_event_bridge.py
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ contract/
â”‚   â”‚   â””â”€â”€ fixtures/
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ console/
â”‚   â””â”€â”€ minimal/
â”‚       â”œâ”€â”€ server.py                 # MVP: runs list + event viewer
â”‚       â””â”€â”€ ui/                       # å¯åç»­æ¢ agent-ui
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ sample-agent/
â”‚   â”‚   â”œâ”€â”€ agent.yaml
â”‚   â”‚   â”œâ”€â”€ prompts/
â”‚   â”‚   â”‚   â””â”€â”€ prompt.txt
â”‚   â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”‚   â””â”€â”€ echo.tool.yaml
â”‚   â”‚   â””â”€â”€ inputs/
â”‚   â”‚       â””â”€â”€ input.json
â”‚   â””â”€â”€ README.md
â””â”€â”€ runs/
    â””â”€â”€ .gitkeep                      # æœ¬åœ° run äº§ç‰©ï¼ˆevents.jsonlç­‰ï¼‰
```

**ä¸ºä»€ä¹ˆ mono-repo èµ·æ­¥æ›´å¥½**

* schemaã€PALã€adapterã€æ ·æ¿ agent **å¿…é¡»åŒæ­¥æ¼”è¿›**ï¼Œæ‹† repo ä¼šæŠŠ CI/å¥‘çº¦ä¸€è‡´æ€§æå¤æ‚
* ç­‰åˆ°å¹³å°ç¨³å®šå†æ‹†ï¼ˆä¾‹å¦‚ `platform-core` ç‹¬ç«‹ repoï¼‰æˆæœ¬æ›´ä½

---

## 5ï¸âƒ£ æ¨¡æ¿ï¼ˆæ˜å¤©å°±èƒ½å¤åˆ¶ï¼‰

### 5.1 Agent æ¨¡æ¿ï¼š`agents/<agent-name>/agent.yaml`

```yaml
apiVersion: agent.platform/v1
kind: Agent
metadata:
  name: sample-agent
  version: v0.1.0
  owner: platform-team
  labels:
    stage: dev
  description: "Sample agent that calls echo tool"
spec:
  type: conversational
  runtime:
    selector: agno
    params: {}
  modelRef:
    provider: openai
    name: gpt-4.1
    params:
      temperature: 0.2
  promptRef: prompts/prompt.txt
  tools:
    - echo
  policiesRef: []
  limits:
    maxTokens: 4000
    maxToolCalls: 5
    timeoutMs: 120000
  observability:
    trace: true
    costTracking: true
    eventLevel: standard
```

### 5.2 Tool æ¨¡æ¿ï¼š`agents/<agent-name>/tools/echo.tool.yaml`

```yaml
apiVersion: agent.platform/v1
kind: Tool
metadata:
  name: echo
  version: v0.1.0
  owner: platform-team
  description: "Echo tool for MVP"
spec:
  inputsSchema:
    type: object
    properties:
      text:
        type: string
    required: [text]
  outputsSchema:
    type: object
    properties:
      text:
        type: string
    required: [text]
  timeoutMs: 1000
  retry: 0
  idempotent: true
  sideEffects: false
  auth:
    type: none
    scopes: []
  permissions: []
  rateLimit:
    rps: 0
    burst: 0
```

### 5.3 Prompt æ¨¡æ¿ï¼š`agents/<agent-name>/prompts/prompt.txt`

```text
You are a helpful agent.
If user asks to echo, call tool "echo" with {"text": "<content>"}.
Return the tool result to user.
```

### 5.4 è¾“å…¥æ ·ä¾‹ï¼š`agents/<agent-name>/inputs/input.json`

```json
{ "text": "echo: hello platform" }
```

---

## 6ï¸âƒ£ é…ç½®ç®¡ç†ç­–ç•¥ï¼ˆPrompt/Model/Spec/ç°åº¦ï¼‰

### MVP è§„åˆ™ï¼ˆç®€å•ä½†ä¸ä¹±ï¼‰

* **Specï¼ˆAgent/Tool/Policyï¼‰**ï¼šåªæ”¾åœ¨ repoï¼ˆ`agents/**`ï¼‰ï¼Œç”± CI æ ¡éªŒ
* **Prompt**ï¼šå…ˆæ–‡ä»¶å¼•ç”¨ï¼ˆ`promptRef: prompts/prompt.txt`ï¼‰ï¼Œåç»­å†ä¸Š prompt:// èµ„æºæœåŠ¡
* **Model**ï¼šå…ˆå†™åœ¨ specï¼ˆprovider/name/paramsï¼‰ï¼Œåç»­å¼•å…¥ `modelRef` æ³¨å†Œè¡¨
* **ç°åº¦/å›æ»šï¼ˆæœ€å°å®ç°ï¼‰**ï¼š

  * ç”¨ `metadata.labels.stage=dev/canary/prod` è¡¨ç¤ºé˜¶æ®µ
  * registry åªå…è®¸ `prod` è¢«é»˜è®¤è·¯ç”±
  * å›æ»š = registry æŒ‡å›æ—§ versionï¼ˆä¸æ”¹ä»£ç ï¼‰

---

## 7ï¸âƒ£ CI æœ€å°æµæ°´çº¿ï¼ˆSchema + æµ‹è¯• + é˜²é”æ­»ï¼‰

### 7.1 CI é˜¶æ®µï¼ˆå»ºè®®é¡ºåºï¼‰

1. **Lint/Format**ï¼ˆpythonï¼‰
2. **Schema Validate**ï¼š`agentctl validate --path agents/`
3. **Unit Tests**ï¼š`pytest platform-core`
4. **Contract Tests**ï¼š`pytest agent-runtime-agno/tests/contract`
5. **Dependency Guard**ï¼šæ‰«æ `agents/` ä¸ `platform-core/sdk` ç¦æ­¢ `agno` import

### 7.2 Dependency Guardï¼ˆè§„åˆ™ï¼‰

* **å…è®¸**ï¼š`agent-runtime-agno/**` import agno
* **ç¦æ­¢**ï¼š`platform-core/**`ã€`agents/**` å‡ºç° `import agno` æˆ–ä¾èµ– agno åŒ…

> MVP å…ˆç”¨ grep/ç®€å•è„šæœ¬å³å¯ï¼Œåç»­å†ç”¨æ›´ä¸“ä¸šçš„ä¾èµ–åˆ†æã€‚

---

## 8ï¸âƒ£ é‡Œç¨‹ç¢‘ä¸éªŒæ”¶æ ‡å‡†ï¼ˆæ˜å¤©å¼€å·¥ç‰ˆï¼‰

### Day 1

* [ ] mono-repo åˆå§‹åŒ–å®Œæˆ
* [ ] schema è½ç›˜ + `agentctl validate` èƒ½è·‘
* [ ] sample-agent spec æ ¡éªŒé€šè¿‡

### Day 2â€“3

* [ ] `agentctl run-local` èƒ½è·‘é€š sample-agent
* [ ] äº§å‡º `runs/<runId>/events.jsonl`ï¼Œè‡³å°‘åŒ…å« run_start / run_end

### Week 1ï¼ˆéªŒæ”¶ï¼‰

* [ ] tool_call/tool_result äº‹ä»¶å¯è§ï¼ˆecho toolï¼‰
* [ ] dependency guard ç”Ÿæ•ˆï¼ˆPR å¼•å…¥ agno ä¼šå¤±è´¥ï¼‰
* [ ] contract test æœ‰è‡³å°‘ 1 æ¡ï¼ˆå›ºå®šè¾“å…¥è¾“å‡ºï¼‰

---

## 9ï¸âƒ£ é£é™©ä¸å›æ»šæ–¹æ¡ˆï¼ˆâ‰¥3ï¼‰

1. **é£é™©ï¼šmono-repo å˜å¤§åç®¡ç†å›°éš¾**

   * å›æ»šï¼šç¨³å®šåæ‹†å‡º `platform-core` ä¸ºç‹¬ç«‹ repoï¼›schema ä½œä¸ºç‹¬ç«‹ package å‘å¸ƒ

2. **é£é™©ï¼šagent-ui å¼•å…¥æˆæœ¬è¿‡é«˜**

   * å›æ»šï¼šå…ˆç”¨ `console/minimal`ï¼ˆè¯» events.jsonl/SQLiteï¼‰ï¼Œagent-ui æ”¾åˆ° Phase 2 å†è¯„ä¼°

3. **é£é™©ï¼šspec/æ¨¡æ¿ä¸å¤Ÿé¡ºæ‰‹å¯¼è‡´ä¸šåŠ¡ç»•è·¯**

   * å›æ»šï¼šæŠŠ `agentctl init agent/tool` åŠ å…¥è„šæ‰‹æ¶ï¼ˆä¸‹ä¸€é˜¶æ®µå¢å¼º DevXï¼‰

4. **é£é™©ï¼šäº‹ä»¶æµ/å›æ”¾åšå¾—å¤ªæ™šå¯¼è‡´ä¸å¯è°ƒè¯•**

   * å›æ»šï¼šMVP å¼ºåˆ¶ events.jsonl è½ç›˜ï¼Œå…ˆè§£å†³â€œå¯è§æ€§â€

---

## ğŸ”Ÿ ä¸‹ä¸€è½®è¾“å…¥è¦æ±‚ï¼ˆB5ï¼‰

è¯·ç›´æ¥å‘ï¼š

> **B5ï¼šMVP ç«¯åˆ°ç«¯é—­ç¯ï¼ˆç¬¬ä¸€ä¸ª Agent ä¸Šçº¿æ¸…å•ï¼‰**

å¦‚æœä½ æ„¿æ„ç»§ç»­æé€Ÿï¼Œåœ¨ B5 åé¢åŠ ä¸€å¥ï¼š**â€œé€‰ä¸€ä¸ªæ ·æ¿ Agentï¼ˆæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆï¼‰â€** æˆ–ä½ æƒ³è¦çš„æ ·æ¿æ–¹å‘ï¼ˆéœ€æ±‚/æµ‹è¯•/å‘å¸ƒ/è¿ç»´ï¼‰ï¼Œæˆ‘ä¼šæŠŠ Week1~Week6 è®¡åˆ’ã€Demo è„šæœ¬ã€äººå®¡ç‚¹ä½ã€å…³é”®éåŠŸèƒ½ï¼ˆå–æ¶ˆ/é‡è¯•/å¹‚ç­‰/æˆæœ¬ï¼‰ä¸€æ¬¡æ€§æ‹‰é½ã€‚
